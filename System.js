
// products data
var data = {
    "productList":[
        {
            "id":"p01",
            "name":"Decked to the Pines",
            "price":14.00,
            "img":["ID_001_01.jpg","ID_001_02.jpg","ID_001_03.jpg"],
            "star":4.9,
            "content":"-Bling on an edgy new attitude with this green long-lasting nail polish.<br>-Take your manicure to the next level with a gilded metallic finish.<br>-OPI's Infinite Shine is a three-step long lasting nail polish line that provides gel-like high shine and 11 days of wear.<br>-Use with Infinite Shine Primer and Infinite Shine Gloss for extended wear.<br>-Made in the USA.",
            "cmt":[],
            "category":["Nail Polish","OPI","Green"],
            "date":"11-11-2020"
        },
        {
            "id":"p02",
            "name":"OPI'm a Gem",
            "price":14.00,
            "img":["ID_002_01.jpg","ID_002_02.jpg","ID_002_03.jpg"],
            "star":4,
            "starRate":33,
            "content":"-Dazzle your next dinner party with a powerful black glitter long-lasting nail polish.<br>-Make a statement with a blinged-out glitter finish.<br>-OPI's Infinite Shine is a three-step long lasting nail polish line that provides gel-like high shine and 11 days of wear.<br>-Use with Infinite Shine Primer and Infinite Shine Gloss for extended wear.<br>-Made in the USA.",
            "cmt":[],
            "category":["Nail Polish","OPI","Black","Blue"],
            "date":"19-9-2019"
        },
        {
            "id":"p03",
            "name":"Rhinestone Red-y",
            "price":14.00,
            "img":["ID_003_01.jpg","ID_003_02.jpg","ID_003_03.jpg"],
            "star":4.3,
            "content":"-Spread holiday joy with a sophisticated and versatile red long-lasting nail polish.<br>-The striking pearl finish will set you apart from the crowd this season.<br>-OPI's Infinite Shine is a three-step long lasting nail polish line that provides gel-like high shine and 11 days of wear.<br>-Use with Infinite Shine Primer and Infinite Shine Gloss for extended wear.<br>-Made in the USA.",
            "cmt":[],
            "category":["Nail Polish","OPI","Red"],
            "date":"18-11-2020"
        },
        {
            "id":"p04",
            "name":"Tealing Festive",
            "price":14.00,
            "img":["ID_004_01.jpg","ID_004_02.jpg","ID_004_03.jpg"],
            "star":4.3,
            "content":"-Make your holiday manis major eye candy with a jewelry box of effects. In 15 iconic shades that sleigh-and are perfect for mixing and matching for multiple looks and moods.<br>-Express yourself through color with OPI Nail Lacquer and Infinite Shine. Available in a variety of shades to suit every mood, outfit, and occasion, use OPI to take your look to the next level. Stay classic with OPI Nail Lacquer in tried-and-true shades like Big Apple Red. Or get the look of gel without the commitment with OPI Infinite Shine.",
            "cmt":[],
            "category":["Nail Polish","OPI","Blue"],
            "date":"18-11-2020"
        },
        {
            "id":"p05",
            "name":"Sleigh Bells Bling",
            "price":20.00,
            "img":["ID_005_01.jpg","ID_005_02.jpg","ID_005_03.jpg"],
            "star":4.3,
            "content":`
                -Make your holiday manis major eye candy with a jewelry box of effects. In 15 iconic shades that sleigh-and are perfect for mixing and matching for multiple looks and moods.<br>
                -Make your holiday manis major eye candy with a jewelry box of effects. In 15 iconic shades that sleigh-and are perfect for mixing and matching for multiple looks and moods.<br>
                -Express yourself through color with OPI Nail Lacquer and Infinite Shine. Available in a variety of shades to suit every mood, outfit, and occasion, use OPI to take your look to the next level. Stay classic with OPI Nail Lacquer in tried-and-true shades like Big Apple Red. Or get the look of gel without the commitment with OPI Infinite Shine.
            `,
            "cmt":[],
            "category":["Nail Polish","OPI","Yellow"],
            "date":"18-11-2020"
        },
        {
            "id":"p06",
            "name":"Charmed, I'm Sure",
            "price":14.00,
            "img":["ID_006_01.jpg","ID_006_02.jpg","ID_006_03.jpg"],
            "star":4.3,
            "content":`
                - Bling holiday cheer wherever you go with a rich fuchsia long-lasting nail polish.<br>
                - Dial up your elegance with a shimmery finish.<br>   
                - OPI's Infinite Shine is a three-step long lasting nail polish line that provides gel-like high shine and 11 days of wear.<br>
                - Use with Infinite Shine Primer and Infinite Shine Gloss for extended wear. <br>
                - Made in the USA.             
            `,
            "cmt":[],
            "category":["Nail Polish","OPI","Purple"],
            "date":"18-11-2020"
        },  
        {
            "id":"p07",
            "name":"Cherry",
            "price":12.00,
            "img":["ID_007_01.jpg","ID_007_02.jpg","ID_007_03.jpg"],
            "star":4.3,
            "content":`
                -Cerise and shine. A beyond-bombshell red. Elegant and eternally modern. 0.45 fl oz/13.3 mL.<br>
                <b>-8-free + cruelty-free + vegan:</b><br>
                + Does not contain: dibutyl phthalate (dbp), toluene, formaldehyde, formaldehyde resin, camphor, ethyl tosylamide, xylene, triphenyl phosphate (tphp) <br>
                <b>-Ingredients</b><br>
                + butyl acetate, ethyl acetate, nitrocellulose, adipic acid / neopentyl glycol / trimellitic anhydride copolymer, acetyl tributyl citrate, isopropyl alcohol, acrylates copolymer, stearalkonium bentonite, n-butyl alcohol, benzophenone-1, silica, alumina, trimethylpentanediyl dibenzoate, polyvinyl butyral, styrene / acrylates copolymer, polyethylene terephthalate, polybutylene terephthalate, ethylene / va copolymer. may contain (+/-): aluminum powder (ci 77000), iron oxides (ci 77499 / ci 77491), red 34 lake(ci 15880), red 6 lake (ci 15850), red 7 lake (ci 15850), yellow 5 lake (ci 19140), ferric ammonium ferrocyanide (ci 77510), mica (ci 77019), blue 1 (ci 42090), yellow 11 (ci 47000), titanium dioxide (ci 77891), violet 2 (ci 60725).
            `,
            "cmt":[],
            "category":["Nail Polish","Tenoverten","Red"],
            "date":"18-11-2020"
        },
        {
            "id":"p08",
            "name":"Church",
            "price":12.00,
            "img":["ID_008_01.jpg","ID_008_02.jpg","ID_008_03.jpg"],
            "star":4.3,
            "content":`
                -Show-stopping Bordeaux, dense and deep. A midnight burgundy to savor for days. 0.45 fl oz/13.3 mL.<br>
                <b>-8-free + cruelty-free + vegan:</b><br>
                + Does not contain: dibutyl phthalate (dbp), toluene, formaldehyde, formaldehyde resin, camphor, ethyl tosylamide, xylene, triphenyl phosphate (tphp) <br>
                <b>-Ingredients</b><br>
                + butyl acetate, ethyl acetate, nitrocellulose, adipic acid / neopentyl glycol / trimellitic anhydride copolymer, acetyl tributyl citrate, isopropyl alcohol, acrylates copolymer, stearalkonium bentonite, n-butyl alcohol, benzophenone-1, silica, alumina, trimethylpentanediyl dibenzoate, polyvinyl butyral, styrene / acrylates copolymer, polyethylene terephthalate, polybutylene terephthalate, ethylene / va copolymer. may contain (+/-): aluminum powder (ci 77000), iron oxides (ci 77499 / ci 77491), red 34 lake(ci 15880), red 6 lake (ci 15850), red 7 lake (ci 15850), yellow 5 lake (ci 19140), ferric ammonium ferrocyanide (ci 77510), mica (ci 77019), blue 1 (ci 42090), yellow 11 (ci 47000), titanium dioxide (ci 77891), violet 2 (ci 60725).
            `,
            "cmt":[],
            "category":["Nail Polish","Tenoverten","Black"],
            "date":"18-11-2020"
        },
        {
            "id":"p09",
            "name":"Jane",
            "price":20.00,
            "img":["ID_009_01.jpg","ID_009_02.jpg","ID_009_03.jpg"],
            "star":4.3,
            "content":`
                -A milky neutral pink for an instant boost of brightness. Feminine and flattering. 0.45 fl oz/13.3 mL.<br>
                <b>-8-free + cruelty-free + vegan:</b><br>
                + does not contain: dibutyl phthalate (dbp), toluene, formaldehyde, formaldehyde resin, camphor, ethyl tosylamide, xylene, triphenyl phosphate (tphp) <br>
                <b>-Ingredients</b><br>
                + butyl acetate, ethyl acetate, nitrocellulose, adipic acid / neopentyl glycol / trimellitic anhydride copolymer, acetyl tributyl citrate, isopropyl alcohol, acrylates copolymer, stearalkonium bentonite, n-butyl alcohol, benzophenone-1, silica, alumina, trimethylpentanediyl dibenzoate, polyvinyl butyral, styrene / acrylates copolymer, polyethylene terephthalate, polybutylene terephthalate, ethylene / va copolymer. may contain (+/-): aluminum powder (ci 77000), iron oxides (ci 77499 / ci 77491), red 34 lake(ci 15880), red 6 lake (ci 15850), red 7 lake (ci 15850), yellow 5 lake (ci 19140), ferric ammonium ferrocyanide (ci 77510), mica (ci 77019), blue 1 (ci 42090), yellow 11 (ci 47000), titanium dioxide (ci 77891), violet 2 (ci 60725).
            `,
            "cmt":[],
            "category":["Nail Polish","Tenoverten","Yellow"],
            "date":"18-11-2020"
        },
        {
            "id":"p10",
            "name":"(Un)Guilty pleasures",
            "price":9.00,
            "img":["ID_010_01.jpg","ID_010_02.jpg","ID_010_03.jpg"],
            "star":4.3,
            "content":`
                life is too short for regrets, so leave the guilt behind with this rich teal green vegan nail polish with blue undertones<br>
                - inspired by your favorite (un)guilty pleasures, the new essie (un)guilty pleasures collection is all about saying yes to the things that make you happy and leaving the guilt behind.<br>
                - salon quality, 8-free, vegan formula for flawless coverage.<br>
                - our exclusive easy glide brush for quick, even professional application on nails.<br>
                - from the essie collection, which has produced more than 1,000 shades and counting.<br>
            `,
            "cmt":[],
            "category":["Nail Polish","Essie","Blue"],
            "date":"18-11-2020"
        },
        {
            "id":"p11",
            "name":"Tropic low",
            "price":10.00,
            "img":["ID_011_01.jpg","ID_011_02.jpg","ID_011_03.jpg"],
            "star":4.3,
            "content":`
                <b><u>summer 2022</u></b><br>
                steal the spotlight on the dance floor with this shimmering, mossy green nail polish with gold duochrome pearls (shimmer)<br>
                - inspired by sizzling summer days and sultry summer nights, essie proudly introduces the limited edition summer 2022 collection. this steamy range features five bold creams and one mesmerizing shimmer that set the tiki bar high. this season, get away from it all with vacay-ready shades that will leave you saying “isle see you later.”
                salon quality formula for flawless coverage.<br>
                - our exclusive easy glide brush for quick, even professional application on nails.
                from the essie collection, which has produced more than 1,000 shades and counting.<br>
                - over a thousand nuanced colors, essie original nail polish takes from the latest fashion and cultural trends to make your manicure possibilities endless, with a wink and story always on hand. your partner for playful inspiration.<br>
            `,
            "cmt":[],
            "category":["Nail Polish","Essie","Yellow"],
            "date":"18-11-2020"
        },
        {
            "id":"p12",
            "name":"Caught in the rain",
            "price":10.00,
            "img":["ID_012_01.jpg","ID_012_02.jpg","ID_012_03.jpg"],
            "star":4.3,
            "content":`
                <b><u>(un)guilty pleasures cream green</u></b><br>
                dance like no one's watching and enjoy that it's pouring with this muted neutral sage green vegan nail polish with gray undertones<br>
                - inspired by your favorite (un)guilty pleasures, the new essie (un)guilty pleasures collection is all about saying yes to the things that make you happy and leaving the guilt behind.<br>
                - salon quality, 8-free, vegan formula for flawless coverage.<br>
                - our exclusive easy glide brush for quick, even professional application on nails.<br>
                - from the essie collection, which has produced more than 1,000 shades and counting.<br>
            `,
            "cmt":[],
            "category":["Nail Polish","Essie","Grey"],
            "date":"18-11-2020"
        },
        {
            "id":"p13",
            "name":"The Big Clip",
            "price":30.00,
            "img":["ID_013_01.jpg","ID_013_02.jpg","ID_013_03.jpg"],
            "star":4.3,
            "content":`
                <b><u>Detail</u></b><br>
                Start your pedicure off on the right foot with this durable, straight-edged toenail trimmer.<br>
                <br>
                Crafted in Germany of stainless steel and coated in ultra-hard, scratch-resistant black coating that repels water, oil, and bacteria for the ultimate in clean clipping.<br>
                <b><u>How to</u></b><br>
                Lift handle and rotate. Begin by clipping nails at the left and right edges. Then, move to the center, trimming gradually to achieve the desired length and shape. Starting at the corners minimizes stress to the nail, helping to prevent breakage and ingrowns.<br>
            `,
            "cmt":[],
            "category":["Tool","Tenoverten"],
            "date":"18-11-2020"
        },
        {
            "id":"p14",
            "name":"Tool Roll",
            "price":38.00,
            "img":["ID_014_01.jpg","ID_014_02.jpg","ID_014_03.jpg"],
            "star":4.3,
            "content":`
                <b><u>Detail</u></b><br>
                Upgrade your drawer or cosmetic bag full of nail tools with our vegan leather tool roll. Store your Tenoverten manicure & pedicure tools in the roomy pouch, which folds over and secures with an elastic closure. 6.5" x 4" when open. <br>
            `,
            "cmt":[],
            "category":["Tool","Tenoverten"],
            "date":"18-11-2020"
        },
        {
            "id":"p15",
            "name":"Heart Shape Nail Charms",
            "price":4.00,
            "img":["ID_015_01.jpg","ID_015_02.jpg","ID_015_03.jpg"],
            "star":4.3,
            "content":`
                - Material: Acrylic<br>
                - Perfect for: Nail Art, Craft, Phone Pop Sockets Art etc.<br>
                - Quantity: 20pcs/ pack<br>
                - Please NOTE that what you are purchasing is Nail Charms, excluding acrylic nails. And the actual color may vary slightly from your monitor. This is due to the fact that every computer monitor displays colors differently            `,
            "cmt":[],
            "category":["Accessory"],
            "date":"18-11-2020"
        },
        {
            "id":"p16",
            "name":"Metal Nail Charms",
            "price":3.5,
            "img":["ID_016_01.jpg","ID_016_02.jpg","ID_016_03.jpg"],
            "star":4.3,
            "content":`
                - 50pcs mixed chrome cross nail charms, 10 different style includes cross, goat, key, star...<br>
                - Size: 5-10mm<br>
                - Color: Silver or Gold<br>
                - + 10ml UV glue $3.5 (*Must use UV light)<br>
                - The glue is so clear and won't appear any white color<br>
            `,
            "cmt":[],
            "category":["Accessory"],
            "date":"18-11-2020"
        },
        {
            "id":"p17",
            "name":"Moon and Stars Decals",
            "price":3.5,
            "img":["ID_017_01.jpg","ID_017_02.jpg","ID_017_03.jpg"],
            "star":4.3,
            "content":`
                - Create your own design with these gold stars and moon nail decals!<br>
                - SIZE: The size of the temporary nail tattoo sheet is 9,6 x 6,6 cm (3 4/5 inch x 2 3/5 inch).<br>
                - WHAT YOU GET: This listing is for one sheet of high quality temporary tattoo nail tattoos. Tattoorary offers high quality temporary nail tattoos. Application directions are included in your package.<br>
            `,
            "cmt":[],
            "category":["Accessory"],
            "date":"18-11-2020"
        },
        {
            "id":"p18",
            "name":"Polar Light Crystals",
            "price":6.5,
            "img":["ID_018_01.jpg","ID_018_02.jpg","ID_018_03.jpg"],
            "star":4.3,
            "content":`
                - Glass aurora geometrical crystals color changing super shine<br>
                - Material: Glass<br>
                - Mixed size, 14 styles, 5pcs each.<br>
                - Price for 70pcs total.<br>
                - Item purpose: Nail art, jewelry/ accessories design, DIY crafts.<br>
                - Target customer: handmade lovers, nail art lovers, designers,<br>
            `,
            "cmt":[],
            "category":["Accessory"],
            "date":"18-11-2020"
        }
    ],
    "account":[
        {
            'name':'admin',
            'password':'admin',
            'Avatar':'ava1.png',
            'Fullname':'Admin',
            'Address':'FPT',
            'Email':'FakeFace@gmail.com',
            'Phone': '+84913636373'
        }
    ],
    
}

// website setting data
var setting = {
    "Home":{
            "mobileCollDropdown":false,
            "mobileProductDropdown":false
        },
    "Products":{
            "brandFilter":false,
            "cateFilter":false,
            "colorFilter":false
    },
    "productInfo":{
            "description":false
    },
    "Nav":{
        "login":"false",
        "loginIndex":-1
    }
}

//cart variable start
var cart=[];

if (localStorage.shopCart == null){
    localStorage.shopCart = JSON.stringify(cart);
}

//checkOut variable start
if (localStorage.checkOut == null)
localStorage.checkOut = "[]";



// login status
if (localStorage.getItem("login")==null){
    localStorage.login = setting.Nav.login;
}


//save products data
localStorage.proList = JSON.stringify(data.productList);

if (localStorage.accountList==null){
    localStorage.accountList = JSON.stringify(data.account)
}

//show avatar of user
$(document).ready(function(){
    if (localStorage.login == "false"){
        if (window.location.href.slice(-10)=="index.html"){
            $('.accountIcon').attr("src","GeneralFormat/AccountIcon.png");
        } else {
            $('.accountIcon').attr("src","../GeneralFormat/AccountIcon.png");
        }
    
    } else {
        let ava = JSON.parse(localStorage.accountList)[localStorage.loginIndex].Avatar;
        if (window.location.href.slice(-10)=="index.html"){
            $('.accountIcon').attr("src","GeneralFormat/"+ava);
            $('.accountIcon').attr("style",`
                width: 50px;
                height: 69px;
                border: 2px solid black;
                border-radius: 50%;
            `)
        } else {
            $('.accountIcon').attr("src","../GeneralFormat/"+ava);
            $('.accountIcon').attr("style",`
                width: 50px;
                height: 69px;
                border: 2px solid black;
                border-radius: 50%;
            `)
        }
    }
})

//show cart quantity
if (localStorage.shopCart == "[]"){
    localStorage.cartQuan = 0;
} 


// toggle by Sign in and out status
$(".account-login").toggle(localStorage.login == "false")
$(".account-logout").toggle(localStorage.login == "true")


displayItemProduct(data.productList);

// hide content when start
$(document).ready(function(){
    $('.brandFilterContent').hide();
    $('.cateFilterContent').hide();
    $('.colorFilterContent').hide();

    $('.mobileProductDropdown').hide();

    $('.descriptionContent').hide();
});



// Home feature start
$('.collDropDownBtn').click(function(){ 
    setting.Home.mobileCollDropdown = !setting.Home.mobileCollDropdown;
    $('.mobileCollDropdownNav').toggle(100);
    if (setting.Home.mobileCollDropdown){
        $('.collDropDownBtn').html("-");
    } else {
        $('.collDropDownBtn').html("+");
    }
    
});

// dropdown hide/show nav-products bar
$('.mobileProductDropdownBtn').click(function(){
    setting.Home.mobileProductDropdown = !setting.Home.mobileProductDropdown;
    if (setting.Home.mobileProductDropdown){
        $('.mobileProductDropdownBtn').html("-");
    } else {
        $('.mobileProductDropdownBtn').html("+");
    }
    $('.mobileProductDropdown').toggle(100);
    
});
// Home feature end


//=====================
//=   Login system    =
//=====================


// Sign Up feature start
$('.signUp-Btn').click(function(){
    let accountName = $('#signUp-accountName').val();
    let accountPass = $('#signUp-accountPassword').val();
    let accountRePass = $('#signUp-accountRePass').val();
    let accList = JSON.parse(localStorage.accountList);
    let err='';
    let c=0;

    for (var i in accList){
        if (accList[i].name == accountName || accountPass != accountRePass){
            if (accList[i].name == accountName){
                c++;
                err+=`<span style="color:red"> Account has already been used !! </span>`;
            } else {
                c++;
                err+=`<span style="color:red"> Those passwords didn't match. Try again. !!</span>`;
            } 
        }
    }
    if (c==0){
        let newAccount = {
            'name': accountName,
            'password': accountPass,
            'Avatar':'ava1.png',
            'Fullname':'',
            'Address':'',
            'Email':'',
            'Phone':''
        };
            accList.push(newAccount);
            localStorage.accountList = JSON.stringify(accList);
            location.href="../index.html"
    }
            

    $('.signUpInfo').html(err);
})
// Sign Up feature end

// Sign In feature start
$('.signIn-Btn').click(function(){
    let c=0;
    let accountName = $('#signInName').val();
    let accountPass = $('#signInPass').val();
    let accList = JSON.parse(localStorage.accountList);
    for (var i in accList){
        if (accountName == accList[i].name && accountPass == accList[i].password){
            localStorage.login = "true"
            location.href = '../index.html';
            c=0;
            localStorage.loginIndex = i;
            break;
        } else {
            c++;
        }
    }
    if (c!=0){
        $('.signInInfo').html('<span style="color:red">Account or Password is wrong !!</span>')
    }
})
// Sign In feature end

// Sign Out feature start
$('.signOutBtn').click(function(){
    localStorage.login = "false";
    localStorage.loginIndex = -1;
    location.href='';
})
//Sign Out feature end

// Information feature start

// Reset Button
$('.resetBtn').click(function(){
    let userInfo= JSON.parse(localStorage.accountList);
    $('.fullNameInput').html('<input type="text" class="infoInput" id="fullNameInfo" value='+userInfo[localStorage.loginIndex].Fullname+' required>');
    $('.addressInput').html('<input type="text" class="infoInput" id="fullNameInfo" value='+userInfo[localStorage.loginIndex].Address+' required>');        
    $('.emailInput').html('<input type="text" class="infoInput" id="fullNameInfo" value='+userInfo[localStorage.loginIndex].Email+' required>');
    $('.phoneInput').html('<input type="text" class="infoInput" id="fullNameInfo" value='+userInfo[localStorage.loginIndex].Phone+' required>');   
    $('.infoChange').html(`
        <div class="alert alert-success" style="text-align:center">
        <strong>Success!</strong> Your information have been reseted
        </div>`
        )
})

// Save changes Button
$('.saveBtn').click(function(){
    let fullname = $('#fullNameInfo').val();
    let address = $('#addressInfo').val();
    let email = $('#emailInfo').val();
    let phone = $('#phoneInfo').val();
    let account = JSON.parse(localStorage.accountList);
    account[parseInt(localStorage.loginIndex)].Fullname = fullname;
    account[localStorage.loginIndex].Address = address;
    account[localStorage.loginIndex].Email = email;
    account[localStorage.loginIndex].Phone = phone;
    localStorage.accountList = JSON.stringify(account);
    $('.infoChange').html(`
        <div class="alert alert-success" style="text-align:center">
        <strong>Success!</strong> Your information have been changed
        </div>`
        )
    
})

//Choose Avatar
$('.chooseAva').click(function(){
    let ava = JSON.parse(localStorage.accountList);
    let avaChange = $(this).data("id");
    ava[localStorage.loginIndex].Avatar=avaChange;
    localStorage.accountList = JSON.stringify(ava);
    $('#avatar').attr("src","../GeneralFormat/"+JSON.parse(localStorage.accountList)[localStorage.loginIndex].Avatar)
    $(document).ready(function(){
        if (localStorage.login == "false"){
            if (window.location.href.slice(-10)=="index.html"){
                $('.accountIcon').attr("src","GeneralFormat/AccountIcon.png");
            } else {
                $('.accountIcon').attr("src","../GeneralFormat/AccountIcon.png");
            }
        
        } else {
            let ava = JSON.parse(localStorage.accountList)[localStorage.loginIndex].Avatar;
            if (window.location.href.slice(-10)=="index.html"){
                $('.accountIcon').attr("src","GeneralFormat/"+ava);
                $('.accountIcon').attr("style",`
                    width: 50px;
                    height: 69px;
                    border: 2px solid black;
                    border-radius: 50%;
                `)
            } else {
                $('.accountIcon').attr("src","../GeneralFormat/"+ava);
                $('.accountIcon').attr("style",`
                    width: 50px;
                    height: 69px;
                    border: 2px solid black;
                    border-radius: 50%;
                `)
            }
        }
    })
})

// Information feature end



//=========================
//=       Products        =
//=========================

// Products show/hide feature
$('.brandFilterBtn').click(function(){
    setting.Products.brandFilter = !setting.Products.brandFilter;
    if (setting.Products.brandFilter){
        $('.showHideBrandIcon').html("-");
    } else {
        $('.showHideBrandIcon').html("+");
    }
    $('.brandFilterContent').toggle(100);
});

$('.cateFilterBtn').click(function(){
    setting.Products.cateFilter = !setting.Products.cateFilter;
    if (setting.Products.cateFilter){
        $('.showHideCateIcon').html("-");
    } else {
        $('.showHideCateIcon').html("+");
    }
    $('.cateFilterContent').toggle(100);
});

$('.colorFilterBtn').click(function(){
    setting.Products.colorFilter = !setting.Products.colorFilter;
    if (setting.Products.colorFilter){
        $('.showHideColorIcon').html("-");
    } else {
        $('.showHideColorIcon').html("+");
    }
    $('.colorFilterContent').toggle(100);
});



// productInfo feature
$('.descriptionBtn').click(function(){
    
    setting.productInfo.description = !setting.productInfo.description;
    if (setting.productInfo.description){
        $('.descriptionBtnContent').html("Description -");
    } else {
        $('.descriptionBtnContent').html("Description +");
    }
    $('.descriptionContent').toggle(100);
});

//each product Showcase
var res = '';
function getUrlID(){
    var urlID = window.location.href;
    res = urlID.slice(-3);
}

function productDetail(){
    var d1 = ``, d2=``;
    var i = 0;
    for (var v of data.productList){
        if (v.id == res){
            i++;
            
            d1 += `
            <div class="row" style="margin-top:100px">  
                <div class="col-md-7">
                    <div class="row imgFrame">
                        <div class="col-sm-12">
                            <img src="Product/${v.img[0]}" alt="" width="60%" style="margin-left: 2.5%" >
                        </div>
                        <div class="col-sm-12">
                            <img src="Product/${v.img[0]}" alt="" width="17.5%" style="margin-left: 2.5%">
                            <img src="Product/${v.img[1]}" alt="" width="17.5%" style="margin-left: 2.5%">
                            <img src="Product/${v.img[2]}" alt="" width="17.5%" style="margin-left: 2.5%">
                        </div>
                    </div>
                </div>
                <div class="col-md-5 infoBorder">
                    <div class="itemInfoForm">
                        <div class="row iName"><b>${v.name}</b></div>
                        <div class="row">
                            <div class="col-sm-12 voteRow">
                                ${v.star}
                                <i class="fa-solid fa-star voting-star" style="color: #572C71;"></i>
                                <i class="fa-solid fa-star voting-star" style="color: #572C71;"></i>
                                <i class="fa-solid fa-star voting-star" style="color: #572C71;"></i>
                                <i class="fa-solid fa-star voting-star" style="color: #572C71;"></i>
                                <i class="fa-solid fa-star voting-star" style="color: #572C71;"></i>
                                (${v.starRate})
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-4 infoTitle">Price:</div>
                            <div class="col-8">$ ${v.price}</div>
                        </div>
                        <div class="row">
                            <div class="col-12 infoTitle">Quantity:</div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <button class="changeQuanBtn minusBtn">-</button>
                                <input type="number" min="1" value="1" class="quanInput">
                                <button class="changeQuanBtn plusBtn">+</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <button class="addToCartBtn" data-id="${v.id}" data-name="${v.name}" data-price="${v.price}" data-img="${v.img[0]}">Add to cart</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <button class="buyBtn" data-id="${v.id}" data-name="${v.name}" data-price="${v.price}" data-img="${v.img[0]}">Buy now</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 desription">`
                    
        d2 +=`            
                    <div class="col-sm-8 descriptionContent">
                        ${v.content}
                    </div>
                </div>
            </div>
            <hr width="70%" style="margin:auto">
            <div class="row cmtPart">   
                <div class="col-12"><b>Comments</b></div>
                <div class="col-9 comment">
                    <div class="row">
                        <div class="col-3 cmtInfo">
                            <img src="" alt="" width="100px" height="100px"> <br>
                            Name
                        </div>
                        <div class="col-9">
                            <div class="cmtContent">
                                Comment sth in this box
                            </div>
                        </div>
                    </div>
                </div>
            </div>  
                `;
            break;
        }

    }
    if (i == 0){
        d += `404 Not Found`;
    }
    $(".productInfo1").html(d1);
    $(".productInfo2").html(d2);
    $('.cartQuantity').html(parseInt(localStorage.cartQuan));

    // +/- Button in productInfo
    $('.plusBtn, .minusBtn').click(function(){
        if ($(this).hasClass('plusBtn')){
            $('.quanInput').attr("value",parseInt($('.quanInput').attr("value"))+1)
        } else {
            $('.quanInput').attr("value",parseInt($('.quanInput').attr("value"))-1)
        }
    })

    //add to cart button
    $('.addToCartBtn').click(function(){
        let itemID = $(this).data("id");
        let itemName = $(this).data("name");
        let itemPrice = $(this).data("price");
        let itemImg = $(this).data("img");
        let iQuan = $('.quanInput').val();
        let cartItem = {"id":itemID,"name":itemName,"price":itemPrice,"img":itemImg,"quantity":iQuan};
        let cartList = JSON.parse(localStorage.shopCart);
        let count = 0;
        for (var i in cartList){
            if (cartList[i].id === itemID){
                cartList[i].quantity = iQuan;
                count++;
            }
        }
        if (count==0){
            localStorage.cartQuan=parseInt(localStorage.cartQuan) + parseInt(iQuan);

            cartList.push(cartItem);
        }
        localStorage.shopCart = JSON.stringify(cartList)
        $('.cartQuantity').html(parseInt(localStorage.cartQuan));
    })  

    //buy now button
    $('.buyBtn').click(function(){
        localStorage.checkOut ="[]"  
        let quantity = $('.quanInput').val();
        let itemID = $(this).data("id");
        let itemName = $(this).data("name");
        let itemPrice = $(this).data("price");
        let itemImg = $(this).data("img");
        let buyNowItem = {"id":itemID,"Name":itemName,"Img":itemImg,"Price":itemPrice,"quantity":quantity};
        let checkOutList = JSON.parse(localStorage.checkOut);
        checkOutList.push(buyNowItem);
        localStorage.checkOut = JSON.stringify(checkOutList);
        location.href = "../Products/checkOut.html"
    })
}

//show each Products in product list
function displayItemProduct(items){
    let s=``;
    $.each(items, function (k, v){
       s += `
        
            <div class="col-lg-4 col-md-6" >
            
                <div class="item">
                    <a href="productInfo.html?id=${v.id}">
                    <div class="col-sm-12"><img src="Product/${v.img[0]}" alt="" width="175px" height="200px"></div>
                    </a> 
                    <div class="col-sm-12 iName"><b>${v.name}</b></div>
                    <div class="col-sm-12">
                        <span class="voteRate">${v.star}</span>
                        <span class="star">
                            <i class="fa-solid fa-star vote-star"></i>
                            <i class="fa-solid fa-star vote-star "></i>
                            <i class="fa-solid fa-star vote-star"></i>
                            <i class="fa-solid fa-star-half-stroke vote-star"></i>
                            <i class="fa-regular fa-star vote-star"></i>
                        </span>
                        <a href="#" class="addToCartBtn" data-id="${v.id}" data-name="${v.name}" data-price="${v.price}" data-img="${v.img[0]}"><img src="../GeneralFormat/CartIcon.png" alt="Shopping Cart" class="cart" width="30px"></a>
                        <br>
                         <span class="itemPrice">$ ${v.price}</span>    
                    </div>
                       
                </div>
            
            </div>
    `; 
    });
    $('.itemShow').html(s);
    $('.cartQuantity').html(parseInt(localStorage.cartQuan));
    
    //add to cart button
    $('.addToCartBtn').click(function(w){
        let itemID = $(this).data("id");
        let itemName = $(this).data("name");
        let itemPrice = $(this).data("price");
        let itemImg = $(this).data("img");
        let cartItem = {"id":itemID,"name":itemName,"price":itemPrice,"img":itemImg,"quantity":1};
        let cartList = JSON.parse(localStorage.shopCart);
        let count = 0;
        for (var i in cartList){
            if (cartList[i].id === itemID){
                count++;
            }
        }
        if (count == 0){
            localStorage.cartQuan=parseInt(localStorage.cartQuan) + parseInt(1);
            cartList.push(cartItem);
        }
        localStorage.shopCart = JSON.stringify(cartList);
        alert(localStorage.shopCart)
        $('.cartQuantity').html(parseInt(localStorage.cartQuan));
    });
}


//filter feature
$('.applyBtn').click(function(){
    let filter = $('.filter:checked');
    let filterList =[];
    let productList = JSON.parse(localStorage.proList);
    let productFilter = [];
    if (filter.length > 0){
        filter.each(function(){
            filterList.push($(this).val());
        })
    }
    for (var i in productList){
        for (var j in productList[i].category){
            for (var k in filterList){
                if (productList[i].category[j] == filterList[k]){
                    if (productFilter.indexOf(productList[i]) ==-1){
                        productFilter.push(productList[i])
                    } 
                }
            }
        }
    }
    if (filterList.length==0){
        displayItemProduct(data.productList);
    } else {
        if (productFilter.length ==0){
            $('.itemShow').html("There's no item in this filter list");
        } else {
            displayItemProduct(productFilter);
        }
    }
})



//==============================
//=         Check Out          =
//==============================

//check out List item Showcase
function checkOutListShow(){
    let checkOutList = JSON.parse(localStorage.checkOut);
    let output=``;
    let totalPrice = 0;
    $.each(checkOutList,function(k,v){
        
        output+=`
                        <div class="row">
                            <div class="col-10">
                                <div class="row">
                                    <div class="col-3">
                                        <img src="../Products/Product/${v.Img}" alt="Product Image" width="100%px" >
                                    </div>
                                    <div class="col-9">
                                        <div class="row listRow"><b>${v.Name}</b></div>
                                        <hr>

                                        <div class="row listRow">
                                            <div class="col-4 listTitle">Quantity:</div>
                                            <div class="col-8 listContent">${v.quantity}</div>
                                        </div>
                                        <hr>
                                        <div class="row listRow">
                                            <div class="col-4 listTitle">Price:</div>
                                            <div class="col-8 listContent">$ ${v.Price} </div>
                                        </div>
                                        <hr>
                                        <div class="row listRow">
                                            <div class="col-4 listTitle">Total:</div>
                                            <div class="col-8 listContent">$ ${v.Price * v.quantity}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
        `
        totalPrice += parseInt(v.Price*v.quantity);
    })
    $('.priceCheckOut').html(totalPrice);
    $('.checkListLoop').html(output);
    $('.totalCheckOut').html(parseInt(totalPrice)+30);
}

//check out form cart
$('.checkOutBtn').click(function(){
    let cartList = JSON.parse(localStorage.shopCart);
    let checkOutList =[];
    $.each(cartList,function(k,v){
        let item = {"id":v.id,"Name":v.name,"quantity":v.quantity,"Img":v.img,"Price":v.price};
        checkOutList.push(item);
    })
    localStorage.checkOut = JSON.stringify(checkOutList);
    location.href = "checkOut.html"
})


